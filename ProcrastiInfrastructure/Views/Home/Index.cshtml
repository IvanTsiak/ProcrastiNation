@using ProcrastiDomain.Model;
@model ProcrastiInfrastructure.Models.DashboardViewModel

@{
    ViewData["Title"] = "Home";
}

<div style="border: 2px solid black; padding: 20px; text-align: center; margin-bottom: 30px;">
    <h2>Time lost by all users:</h2>
    <h1 style="color: red; font-size: 48px;">@Model.GlobalLossAmount minutes</h1>
</div>

<div>
    <h3>Recent Logs</h3>
    <hr />

    @foreach (var log in Model.RecentLogs)
    {
        bool isLoss = log.Logtype == ProcrastiDomain.Model.LogType.loss;
        string color = isLoss ? "red" : "green";
        string sign = isLoss ? "wasted" : "spent with pleasure";
        string styleBorder = isLoss ? "border-left: 5px solid red;" : "border-left: 5px solid green;";
        <div style="border: 1px solid gray; padding: 10px; margin-bottom: 10px; @styleBorder">
            <p>
                <strong>@(log.User?.Username ?? "Anonymous")</strong>
                <span style="color: @color;">@sign</span>
                <strong>@log.Amount</strong> minutes
                in <em>@(log.Activity?.Name ?? "Unknown")</em>
            </p>
            <p>
                <small>Rating: @log.Rating/5 | Date: @log.Createdat?.ToString("dd.MM.yyyy HH:mm")</small>
            </p>
            @if (!string.IsNullOrEmpty(log.Comment))
            {
                <p><em>" @log.Comment "</em></p>
            }
        </div>
    }
</div>